(this["webpackJsonpshopify-internship-challenge"]=this["webpackJsonpshopify-internship-challenge"]||[]).push([[0],{34:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),i=n(23),a=n.n(i),s=(n(34),n(13)),o=n(5),l=n.n(o),d=n(8),u=n(24),b=n(10),j=n(25),m=n(26),h=n(27),f=n.n(h),x=new(function(){function e(){Object(j.a)(this,e)}return Object(m.a)(e,[{key:"searchMovies",value:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("https://www.omdbapi.com/",{params:{s:t,type:"movie",r:"json",apikey:"9db08201"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),O=n(0),p=function(e){var t=e.children;return Object(O.jsx)("h2",{className:"text-lg font-semibold",children:t})},v=n(9),g=n.n(v),y=function(e){var t=e.className,n=e.children,r=g()("bg-white p-4 rounded-md shadow-sm ",t);return Object(O.jsx)("div",{style:{minHeight:"4rem"},className:r,children:Object(O.jsx)("div",{children:n})})},N=function(e){var t=e.children;return Object(O.jsx)("ul",{className:"ml-8 mr-4",children:t})},w=function(e){var t=e.children;return Object(O.jsx)("li",{className:"py-1",children:t})},k=function(e){var t=e.children,n=e.onClick,r=e.disabled,c=g()("border-gray-300 bg-gray-50 border-solid border py-1 px-3 rounded-md shadow-sm",{"opacity-50 cursor-default":r});return Object(O.jsx)("button",{onClick:n,disabled:r,className:c,children:t})},I=function(e){var t=e.movie,n=e.buttonText,r=e.onClick,c=e.alreadyNominated,i=e.nominations;return Object(O.jsx)(w,{children:Object(O.jsxs)("div",{className:"flex items-center",children:[Object(O.jsxs)("p",{className:"pr-2",children:[t.Title," (",t.Year,")"]}),Object(O.jsx)(k,{disabled:c||i&&i.length>=5,onClick:r,children:n})]})})},S=function(e){var t=e.movies,n=e.search,c=e.addNomination,i=e.nominations;return Object(O.jsxs)(y,{children:[Object(O.jsxs)(p,{children:[" Results",n&&Object(O.jsxs)(O.Fragment,{children:[' for "',n,'"']})]}),Object(O.jsxs)(N,{children:[!t.length&&n&&Object(O.jsx)("p",{children:"No results found."}),!!t.length&&t.map((function(e,t){var n=!!i.filter((function(t){return t.imdbID===e.imdbID})).length;return Object(O.jsx)(r.Fragment,{children:Object(O.jsx)(I,{movie:e,buttonText:"Nominate",onClick:function(){return c(e)},alreadyNominated:n,nominations:i})},t)}))]})]})},C=function(e){var t=e.removeNomination,n=e.nominations;return Object(O.jsxs)(y,{children:[Object(O.jsx)(p,{children:"Nominations"}),n&&n.length>=5&&Object(O.jsx)("p",{className:"bg-gray-500 text-white px-2 py-1 my-2 rounded-sm",children:"Thank you for selecting your nominees!"}),Object(O.jsx)(N,{children:n&&n.map((function(e,n){return Object(O.jsx)(I,{movie:e,buttonText:"Remove",onClick:t},n)}))})]})},D=n(29),F=n(28),T=function(e){var t=e.setSearch,n="calc(50% - (1rem / 2))";return Object(O.jsxs)(y,{className:"flex flex-col",children:[Object(O.jsx)("label",{className:"mb-1",htmlFor:"search",children:"Movie title"}),Object(O.jsxs)("div",{className:"relative",children:[Object(O.jsx)(F.a,{icon:D.a,className:"absolute text-gray-500 left-3",style:{top:n,bottom:n}}),Object(O.jsx)("input",{onChange:function(e){e.preventDefault(),t(e.target.value)},className:"w-full border-gray-200 border-solid border-2 rounded-sm pl-10 py-1",type:"text",name:"search"})]})]})},M=function(){var e,t=Object(r.useState)([]),n=Object(b.a)(t,2),c=n[0],i=n[1],a=Object(r.useState)(""),o=Object(b.a)(a,2),j=o[0],m=o[1],h=Object(r.useState)((e=window.localStorage.getItem("nominations"),JSON.parse(e))),f=Object(b.a)(h,2),p=f[0],v=f[1],g=function(e){var t,n=[],r=new Map,c=Object(u.a)(e);try{for(c.s();!(t=c.n()).done;){var i=t.value;r.has(i.imdbID)||(r.set(i.imdbID,!0),n.push(i))}}catch(a){c.e(a)}finally{c.f()}return n},y=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.searchMovies(j);case 3:t=e.sent,n=t.data.Search,i(n?g(n):[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){y()}),[j]),Object(r.useEffect)((function(){var e;window.localStorage.setItem("nominations",(e=p,JSON.stringify(e)))}),[p]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"The Shoppies"}),Object(O.jsx)("section",{children:Object(O.jsx)(T,{setSearch:m})}),Object(O.jsxs)("section",{className:"grid md:grid-cols-2 mt-4 gap-4",children:[Object(O.jsx)(S,{movies:c,search:j,addNomination:function(e){return p.filter((function(t){return t.imdbID===e.imdbID})).length?alert("Oops! Movie has already been nominated."):v([].concat(Object(s.a)(p),[e]))},nominations:p}),Object(O.jsx)(C,{nominations:p,removeNomination:function(e){var t=p.findIndex((function(t){return t.imdbID===e.imdbID})),n=Object(s.a)(p);n.splice(t,1),v(n)}})]})]})};var J=function(){return Object(O.jsx)("div",{className:" w-11/12 md:w-5/6 mx-auto min-w-min py-10",children:Object(O.jsx)(M,{})})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),i(e),a(e)}))};a.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(J,{})}),document.getElementById("root")),E()}},[[58,1,2]]]);
//# sourceMappingURL=main.605298f6.chunk.js.map