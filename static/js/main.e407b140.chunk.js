(this["webpackJsonpshopify-internship-challenge"]=this["webpackJsonpshopify-internship-challenge"]||[]).push([[0],{34:function(e,n,t){},58:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t.n(r),i=t(23),a=t.n(i),s=(t(34),t(13)),o=t(5),l=t.n(o),d=t(8),u=t(24),m=t(10),b=t(25),j=t(26),h=t(27),f=t.n(h),x=new(function(){function e(){Object(b.a)(this,e)}return Object(j.a)(e,[{key:"searchMovies",value:function(){var e=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("https://www.omdbapi.com/",{params:{s:n,type:"movie",r:"json",apikey:"9db08201"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}]),e}()),O=t(0),p=function(e){var n=e.children;return Object(O.jsx)("h2",{className:"text-lg font-semibold",children:n})},v=t(9),g=t.n(v),y=function(e){var n=e.className,t=e.children,r=g()("bg-white p-4 rounded-md shadow-sm ",n);return Object(O.jsx)("div",{style:{minHeight:"4rem"},className:r,children:Object(O.jsx)("div",{children:t})})},N=function(e){var n=e.children;return Object(O.jsx)("ul",{className:"ml-8 mr-4",children:n})},w=function(e){var n=e.children;return Object(O.jsx)("li",{className:"py-1",children:n})},k=function(e){var n=e.children,t=e.onClick,r=e.disabled,c=g()("border-gray-300 bg-gray-50 border-solid border py-1 px-3 rounded-md shadow-sm",{"opacity-50 cursor-default":r});return Object(O.jsx)("button",{onClick:t,disabled:r,className:c,children:n})},I=function(e){var n=e.movie,t=e.buttonText,r=e.onClick,c=e.alreadyNominated,i=e.nominations;return Object(O.jsx)(w,{children:Object(O.jsxs)("div",{className:"flex items-center",children:[Object(O.jsxs)("p",{className:"pr-2",children:[n.Title," (",n.Year,")"]}),Object(O.jsx)(k,{disabled:c||i&&i.length>=5,onClick:r,children:t})]})})},S=function(e){var n=e.movies,t=e.search,c=e.addNomination,i=e.nominations;return console.log({movies:n,search:t,nominations:i}),Object(O.jsxs)(y,{children:[Object(O.jsxs)(p,{children:[" Results",t&&Object(O.jsxs)(O.Fragment,{children:[' for "',t,'"']})]}),Object(O.jsxs)(N,{children:[!n.length&&t&&Object(O.jsx)("p",{children:"No results found."}),!!n.length&&n.map((function(e,n){var t=!!i.filter((function(n){return n.imdbID===e.imdbID})).length;return Object(O.jsx)(r.Fragment,{children:Object(O.jsx)(I,{movie:e,buttonText:"Nominate",onClick:function(){return c(e)},alreadyNominated:t,nominations:i})},n)}))]})]})},C=function(e){var n=e.removeNomination,t=e.nominations;return Object(O.jsxs)(y,{children:[Object(O.jsx)(p,{children:"Nominations"}),t&&t.length>=5&&Object(O.jsx)("p",{className:"bg-gray-500 text-white px-2 py-1 my-2 rounded-sm",children:"Thank you for selecting your nominees!"}),Object(O.jsx)(N,{children:t&&t.map((function(e,t){return Object(O.jsx)(I,{movie:e,buttonText:"Remove",onClick:n},t)}))})]})},D=t(29),F=t(28),T=function(e){var n=e.setSearch,t="calc(50% - (1rem / 2))";return Object(O.jsxs)(y,{className:"flex flex-col",children:[Object(O.jsx)("label",{className:"mb-1",htmlFor:"search",children:"Movie title"}),Object(O.jsxs)("div",{className:"relative",children:[Object(O.jsx)(F.a,{icon:D.a,className:"absolute text-gray-500 left-3",style:{top:t,bottom:t}}),Object(O.jsx)("input",{onChange:function(e){e.preventDefault(),n(e.target.value)},className:"w-full border-gray-200 border-solid border-2 rounded-sm pl-10 py-1",type:"search",name:"search"})]})]})},M=function(){var e,n=Object(r.useState)([]),t=Object(m.a)(n,2),c=t[0],i=t[1],a=Object(r.useState)(""),o=Object(m.a)(a,2),b=o[0],j=o[1],h=Object(r.useState)((e=window.localStorage.getItem("nominations"),JSON.parse(e))),f=Object(m.a)(h,2),p=f[0],v=f[1],g=function(e){var n,t=[],r=new Map,c=Object(u.a)(e);try{for(c.s();!(n=c.n()).done;){var i=n.value;r.has(i.imdbID)||(r.set(i.imdbID,!0),t.push(i))}}catch(a){c.e(a)}finally{c.f()}return t},y=function(){var e=Object(d.a)(l.a.mark((function e(){var n,t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.searchMovies(b);case 3:n=e.sent,t=n.data.Search,i(t?g(t):[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){y()}),[b]),Object(r.useEffect)((function(){var e;window.localStorage.setItem("nominations",(e=p,JSON.stringify(e)))}),[p]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"The Shoppies"}),Object(O.jsx)("section",{children:Object(O.jsx)(T,{setSearch:j})}),Object(O.jsxs)("section",{className:"grid md:grid-cols-2 mt-4 gap-4",children:[Object(O.jsx)(S,{movies:c,search:b,addNomination:function(e){return p.filter((function(n){return n.imdbID===e.imdbID})).length?alert("Oops! Movie has already been nominated."):v([].concat(Object(s.a)(p),[e]))},nominations:p}),Object(O.jsx)(C,{nominations:p,removeNomination:function(e){var n=p.findIndex((function(n){return n.imdbID===e.imdbID})),t=Object(s.a)(p);t.splice(n,1),v(t)}})]})]})};var J=function(){return Object(O.jsx)("div",{className:" w-11/12 md:w-5/6 mx-auto min-w-min py-10",children:Object(O.jsx)(M,{})})},E=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,59)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,i=n.getLCP,a=n.getTTFB;t(e),r(e),c(e),i(e),a(e)}))};a.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(J,{})}),document.getElementById("root")),E()}},[[58,1,2]]]);
//# sourceMappingURL=main.e407b140.chunk.js.map